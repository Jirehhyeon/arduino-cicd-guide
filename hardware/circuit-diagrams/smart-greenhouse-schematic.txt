# 🔧 스마트 온실 상세 회로도 (Fritzing/KiCad 호환)

## 📐 **완전한 회로도 (텍스트 기반)**

```
================================================================================
                        ESP32 스마트 온실 시스템 회로도
================================================================================

                                ESP32 DevKit V1
                        ┌─────────────────────────────┐
                        │                             │
                    3V3 │●                         ●│ VIN
                     EN │●                         ●│ GND  ──┐
                    VP  │●                         ●│ GPIO23  │
                    VN  │●                         ●│ GPIO22  │
                GPIO34  │●                         ●│ GPIO1   │
                GPIO35  │●                         ●│ GPIO3   │
                GPIO32  │●                         ●│ GPIO21 ─┼── WS2812B DIN (330Ω 저항 통해)
                GPIO33  │●                         ●│ GPIO19 ─┼── 릴레이2 IN (팬)
                GPIO25  │●                         ●│ GPIO18 ─┼── 릴레이1 IN (워터펌프)
                GPIO26  │●                         ●│ GPIO5  ─┼── 조도센서 (CdS + 10kΩ 분압)
                GPIO27  │●                         ●│ GPIO17  │
                GPIO14  │●                         ●│ GPIO16  │
                GPIO12  │●                         ●│ GPIO4  ─┼── 토양센서 A0
                   GND  │●                         ●│ GPIO0   │
                GPIO13  │●                         ●│ GPIO2  ─┼── DHT22 DATA (10kΩ 풀업)
                    D2  │●                         ●│ GPIO15  │
                    D3  │●                         ●│ D1      │
                   CMD  │●                         ●│ D0      │
                     5V │●                         ●│ CLK     │
                        │                             │
                        └─────────────────────────────┘
                                       │
                                      GND
                                       │
                        ┌──────────────┼──────────────┐
                        │              │              │
                       GND            GND            GND

================================================================================
                            센서 연결부 상세도
================================================================================

1. DHT22 온습도 센서:
   ┌─────────────┐                    ESP32
   │    DHT22    │                ┌─────────┐
   │             │                │         │
   │  1(VCC) ────┼────────────────┼── 3V3   │
   │  2(DATA)────┼────────────────┼── GPIO2 │
   │  3(NC)      │                │         │  
   │  4(GND) ────┼────────────────┼── GND   │
   │             │                │         │
   └─────────────┘                └─────────┘
                │                      │
            10kΩ 풀업 저항              │
           (DATA ↔ VCC)               │
                                      │

2. 토양 수분 센서:
   ┌─────────────┐                    ESP32
   │ 토양센서     │                ┌─────────┐
   │             │                │         │
   │  VCC ───────┼────────────────┼── 3V3   │
   │  GND ───────┼────────────────┼── GND   │
   │  A0  ───────┼────────────────┼── GPIO4 │
   │  D0         │ (사용안함)      │         │
   │             │                │         │
   └─────────────┘                └─────────┘

3. 조도 센서 (CdS + 분압회로):
                     3V3
                      │
                   ┌──┴──┐
                   │ CdS │ (조도센서)
                   │     │
                   └──┬──┘
                      │ ──── GPIO5 (ESP32)
                   ┌──┴──┐
                   │10kΩ │ (분압저항)
                   │     │
                   └──┬──┘
                      │
                     GND

================================================================================
                           릴레이 모듈 연결부
================================================================================

릴레이 모듈 1 (워터펌프 제어):
   ┌─────────────────┐
   │   릴레이 모듈    │               외부 5V 전원
   │                 │                     │
   │  VCC ───────────┼─────────────────────┤
   │  GND ───────────┼──── ESP32 GND       │
   │  IN  ───────────┼──── ESP32 GPIO18    │
   │                 │                     │
   │  NO ────────────┼─────────────────────┤
   │  COM ───────────┼──── 워터펌프 (+)     │
   │  NC             │                     │
   │                 │                     │
   └─────────────────┘                     │
                                          GND ──── 워터펌프 (-)

릴레이 모듈 2 (팬 제어):
   ┌─────────────────┐
   │   릴레이 모듈    │               외부 5V 전원
   │                 │                     │
   │  VCC ───────────┼─────────────────────┤
   │  GND ───────────┼──── ESP32 GND       │
   │  IN  ───────────┼──── ESP32 GPIO19    │
   │                 │                     │
   │  NO ────────────┼─────────────────────┤
   │  COM ───────────┼──── 팬 (+)          │
   │  NC             │                     │
   │                 │                     │
   └─────────────────┘                     │
                                          GND ──── 팬 (-)

================================================================================
                          LED 스트립 연결부
================================================================================

WS2812B LED 스트립:
   ┌─────────────────┐
   │  WS2812B 스트립  │              외부 5V 전원 (2A 이상)
   │                 │                      │
   │  5V ────────────┼──────────────────────┤
   │  GND ───────────┼──── ESP32 GND        │
   │  DIN ───────────┼──── 330Ω 저항 ───── ESP32 GPIO21
   │                 │                      │
   └─────────────────┘                     GND

보호회로:
   ESP32 GPIO21 ──── [330Ω 저항] ──── WS2812B DIN
   
   * 주의: 5V 전원은 충분한 용량(2A 이상) 필요
   * LED 개수가 많을수록 더 큰 전원 필요

================================================================================
                            전원 분배도
================================================================================

                          외부 5V 어댑터 (3A 권장)
                                    │
                        ┌───────────┼───────────┐
                        │           │           │
                    릴레이1       릴레이2    WS2812B
                    VCC          VCC       5V
                        │           │           │
                        └───────────┼───────────┘
                                    │
                              공통 GND ──── ESP32 GND
                                    │
                        ┌───────────┼───────────┐
                        │           │           │
                     DHT22        토양센서    조도센서
                     VCC          VCC       VCC
                        │           │           │
                        └────── ESP32 3V3 ─────┘

* 주의: 3.3V 센서들은 ESP32 3V3 핀에서 공급
* 5V 부하들은 외부 어댑터에서 직접 공급
* 모든 GND는 공통 연결 필수

================================================================================
                            브레드보드 배치도
================================================================================

브레드보드 상단 뷰 (실제 배치):

     a b c d e f g h i j      a b c d e f g h i j
   ┌─────────────────────┐  ┌─────────────────────┐
 1 │ + + + + + + + + + + │  │ + + + + + + + + + + │ ← 3.3V 레일
 2 │ - - - - - - - - - - │  │ - - - - - - - - - - │ ← GND 레일
   ├─────────────────────┤  ├─────────────────────┤
 3 │                     │  │                     │
 4 │     [ESP32]         │  │    [DHT22]          │
 5 │     DevKit          │  │    센서             │
 6 │     V1              │  │                     │
 7 │     여기에          │  │  [토양센서]         │
 8 │     장착            │  │                     │
 9 │                     │  │                     │
10 │                     │  │  [CdS센서]          │
11 │                     │  │  + 10kΩ저항        │
12 │                     │  │                     │
13 │                     │  │  [릴레이모듈1]      │
14 │                     │  │  [릴레이모듈2]      │
15 │                     │  │                     │
   ├─────────────────────┤  ├─────────────────────┤
16 │ + + + + + + + + + + │  │ + + + + + + + + + + │ ← 5V 레일
17 │ - - - - - - - - - - │  │ - - - - - - - - - - │ ← GND 레일
   └─────────────────────┘  └─────────────────────┘

실제 점퍼 와이어 연결:
- 빨간선: 전원 (3.3V, 5V)
- 검은선: GND
- 흰선 또는 기타 색: 신호선

================================================================================
                          부품 배치 권장사항
================================================================================

1. ESP32 보드:
   - 브레드보드 중앙에 배치
   - USB 포트가 바깥쪽으로 향하게

2. 센서들:
   - DHT22: ESP32 근처 (신호선 짧게)
   - 토양센서: 실제 화분에 꽂을 수 있는 위치
   - 조도센서: 빛을 받을 수 있는 위치

3. 릴레이 모듈:
   - 큰 전류가 흐르므로 별도 구역에 배치
   - 방열 고려 (공기 순환 좋은 곳)

4. LED 스트립:
   - 식물 위에 배치하여 보조 조명 역할
   - 전선 길이 고려하여 배치

================================================================================
                            안전 주의사항
================================================================================

⚠️ 전기 안전:
- 전원 연결 전 모든 연결 재확인
- 쇼트 방지 (멀티미터로 측정)
- 극성 확인 (VCC, GND 올바른 연결)
- 릴레이 모듈의 부하 정격 확인

⚠️ 부품 보호:
- ESP32는 3.3V 로직 (5V 신호 직접 연결 금지)
- 센서 VCC는 3.3V 공급 (5V 금지)
- LED 스트립은 반드시 5V 전원 사용
- 정전기 주의 (부품 만지기 전 손 접지)

⚠️ 물 관련:
- 워터펌프 주변 방수 처리
- 전자부품과 물 분리
- 수위 센서로 과급수 방지 권장

================================================================================
                          확장 가능 핀 배치
================================================================================

추가 확장을 위해 남겨둔 GPIO 핀들:

GPIO23 ── 예약 (추가 센서용)
GPIO22 ── 예약 (I2C SDA - OLED 디스플레이)
GPIO1  ── 예약 (I2C SCL - OLED 디스플레이)  
GPIO3  ── 예약 (UART - 추가 통신)
GPIO17 ── 예약 (추가 릴레이)
GPIO16 ── 예약 (추가 릴레이)
GPIO0  ── 예약 (부팅 제어용)
GPIO15 ── 예약 (추가 센서용)

향후 추가 가능한 기능:
- OLED 디스플레이 (I2C)
- pH 센서
- CO2 센서  
- 카메라 모듈
- 초음파 거리센서 (수위 측정)
- 추가 릴레이 (가습기, 히터 등)

================================================================================
```